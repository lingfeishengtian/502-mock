<!-- filepath: /directory/clear-app/app/views/shared/_events_list.html.erb -->
<h1>Events In Progress</h1>
<ul>
  <% @current_events.each do |event| %>
    <%= render partial: 'events/current_event', locals: { event: event } %>
  <% end %>
</ul>
<!-- if admin display crud buttons -->
<% if current_member.role >= 5 %>
  <%= link_to 'New Event', new_event_path, class: 'btn btn-primary' %>
<% end %>
<%= form_with url: request.path, method: :get, local: true do %>
  <%= hidden_field_tag :filter, params[:filter] == 'past' ? 'future' : 'past' %>
  <%= submit_tag params[:filter] == 'past' ? 'Show Future Events' : 'Show Past Events', class: 'btn btn-secondary' %>
<% end %>
<h1><%= params[:filter] == 'past' ? 'Past Events' : 'Future Events' %></h1>
<ul>
  <% @events.each do |event| %>
    <%= render partial: 'events/detailed_event', locals: { event: event } %>
  <% end %>
</ul>